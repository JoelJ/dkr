#!/bin/bash

function __dkr-rn {
	set -m
	"${DKR_DOCKER_COMMAND}" run "$@" &
	2>/dev/null 1>/dev/null dkr-portmap

	if [ "$?" != "0" ]; then
		err "Could not map ports\!"
	fi

	2>/dev/null 1>/dev/null fg
}

function __dkr-rn-summary_ {
	echo "Runs like normal, and then immediately re-maps all the docker ports"
}

function __dkr-rn-help_ {
	"${DKR_DOCKER_COMMAND}" run --help | sed "s#Usage:\s*docker run#Usage:  ${DKR_NAME} rn#g"
	echo ""
	__dkr-rn-summary_
}

export -f __dkr-rn
export -f __dkr-rn-summary_
export -f __dkr-rn-help_